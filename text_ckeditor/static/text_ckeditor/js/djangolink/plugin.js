var DjangoLink=function(e){CKEDITOR.plugins.add("djangolink",{requires:"dialog,fakeobjects",icons:"DjangoLink",hidpi:!0,onLoad:function(){function a(a){return b.replace(/%1/g,"rtl"==a?"right":"left").replace(/%2/g,"cke_contents_"+a)}var c="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",b=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+
c+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+c+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(a("ltr")+a("rtl"))},init:function(a){var c=this;CKEDITOR.dialog.add("djangolink",this.path+"dialogs/djangolink.js");a.addCommand("djangolink",{allowedContent:"a[!href, data-*]",requiredContent:"a[href]",exec:function(){var b=a.getSelection(),b=b.getSelectedElement()||b.getCommonAncestor().getAscendant("a",!0);c.editLink(b,a)}});a.ui.addButton("DjangoLink",
{label:a.lang.link.toolbar,command:"djangolink",toolbar:"djangolinks,10",icon:"link"});a.on("doubleclick",function(b){var c=CKEDITOR.plugins.link.getSelectedLink(a)||b.data.element;!c.isReadOnly()&&c.is("a")&&(b.data.dialog="djangolink",b.data.link=c);b.data.dialog in{djangolink:1,anchor:1}&&b.data.link&&a.getSelection().selectElement(b.data.link)},null,null,0)},editLink:function(a,c){e("body");c.openDialog("djangolink")},afterInit:function(a){}});CKEDITOR.plugins.djangolink={getLinkAttributes:function(a,
c,b){var d={"data-djangolink":!0},f=["_popup","_save","csrfmiddlewaretoken"];e.each(c,function(a,b){0>e.inArray(a,f)&&null!=b&&(d["data-"+a]=b)});d.href="";b&&(d.href=b);return{set:d,removed:CKEDITOR.tools.objectKeys([])}},getSelectedLink:function(a){var c=a.getSelection(),b=c.getSelectedElement();return b&&b.is("a")?b:(c=c.getRanges()[0])?(c.shrink(CKEDITOR.SHRINK_TEXT),a.elementPath(c.getCommonAncestor()).contains("a",1)):null},parseLinkAttributes:function(a){if(!a||!a.$.attributes)return{};var c=
{};e.each(a.$.attributes,function(a,d){var e=d.name.substr(5);c[e]=d.value});return c}}}(django.jQuery);
